% !TeX root = ../../main.tex

% This allows us to clearly state the extension of a surrounding pair in a subspace of $X$ to a surrounding pair in $X$.
% As in the previous lemmas let $(D, B)$ be a surrounding pair in $X$.
% For a pair $(L, S)$ in $D$ we will use the preceding lemmas to confirm that $D\setminus B\subseteq L$ and $S$ surrounds $L$ in $D$.
% We would then like to re-use this pair to approximate the relative persistent homology of a function $f : D\to \R$.
% As we have only confirmed coverage of the subspace $D\setminus B$ by $L$ we cannot interleave $(L,S)$ with subsets of $(D,B)$ as coverage in $B$ is unknown.
% We therefore introduce the following definition in order to provide us with inclusion maps between pairs.

Suppose $D$ is a subspace of a topological space $X$.
We define the extension of a surrounding pair in $D$ to a surrounding pair in $X$ with isomorphic relative homology.
This is done by excision, and allows us to use the result of the TCC in order to define inclusion maps required for the interleaving.

\begin{definition}[Extension]
  If $V$ surrounds $U$ in a subspace $D$ of $X$ let $\ext{V} := V\sqcup (D\setminus U)$ denote the (disjoint) union of the separating set $V$ with the complement of $U$ in $D$.
  The \textbf{extension of $(U, V)$ in $D$} is the pair
  \[ (D, \ext{V}) = (U\sqcup (D\setminus U), V\sqcup (D\setminus U)).\]
\end{definition}

Now, we can interleave our pair $(U, V)$ with $(D, B')\subset (D, B)$ by the following lemma.

\begin{lemma}\label{lem:surround_and_cover}
  Suppose $V$ surrounds $U$ in $D$ and $B'\subseteq B\subset D$.

  If $D\setminus B\subseteq U$ and $U\cap B'\subseteq V\subseteq B'$ then $B'\subseteq \ext{V}\subseteq B$.
\end{lemma}
\begin{proof}
  Note that $B'\setminus (D\setminus U) = B'\cap U\subseteq V$ implies $B'\subseteq V\sqcup(D\setminus U) = \ext{V}$.
  Moreover, because $V\subseteq B$ and $D\setminus B\subseteq U$ implies $D\setminus U \subset D\setminus (D\setminus B) = B$, we have
  \[ \ext{V} = V\sqcup (D\setminus U) \subseteq B\cup (D\setminus U) = B. \]
  So $B' \subseteq \ext{V}\subseteq B$ as desired.
\end{proof}

If a surrounding pair $(U, V)$ is open in $D$ we can apply excision to the relative homology groups in order to get equivalent maps on homology that are induced by inclusions.

\begin{lemma}\label{lem:excision}
  If $(U, V)$ is a surrounding pair in a subspace $D$ of $X$ and $U$ is open in $D$ then
  \[ \hom_k(U\cap A, V) \cong \hom_k(A, \ext{V}) \]
  for all $k$ and any $A\subseteq D$ such that $\ext{V}\subset A$.
\end{lemma}
\begin{proof}
  Because $V$ surrounds $U$ in $D$, $(U\setminus V, D\setminus U)$ is a separation of $D\setminus V$, a subspace of $D$.
  So $\cl_D(U\setminus V)\setminus U = \cl_D(U\setminus V) \cap (D\setminus U) = \emptyset$ which implies $\cl_D(U\setminus V)\subseteq U = \intr_D(U)$ as $U$ is open in $D$.
  Therefore,
  \begin{align*}
    \cl_D(D\setminus U) = D\setminus \intr_D(U)\subseteq\intr_D(D\setminus (U\setminus V)) = \intr_D(\ext{V}).
  \end{align*}
  so,
  \begin{align*}
    \hom_k(U\cap A, V) = \hom_k(A\setminus (D\setminus U), \ext{V}\setminus (D\setminus U)) \cong \hom_k(A, \ext{V})
  \end{align*}
  for all $k$ and any $A\subseteq D$ such that $\ext{V}\subset A$ by Excision.
\end{proof}

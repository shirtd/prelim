% !TeX root = ../main.tex

In the topological analysis of scalar fields (SFA), one computes a topological summary capturing qualitative and quantitative shape information from a set of points endowed with a metric and a real-valued function.
That is, we have points with distances and a real number assigned to each point.
More generally, it suffices to have a neighborhood graph on the points identifying the pairs of points within some distance.
The topological computation uses persistent homology to integrate local information from the function into global information about its \emph{behavior} as whole.
In prior work, Chazal et al.~\cite{chazal09analysis} showed that for sufficiently dense samples on sufficiently smooth spaces, the persistence diagram can be computed with some guarantees.
In followup work, Buchet et al.~\cite{buchet15topological} extended this result to show how to work with noisy inputs.
A fundamental assumption required to have strong guarantees on the output of these methods is that the underlying space be sufficiently well-sampled.
In this paper, we show how to combine scalar field analysis with the theory of topological coverage testing to simultaneously compute the persistence diagram and also to test that the underlying space is sufficiently well-sampled.

Initiated by De Silva and Ghrist~\cite{desilva06coordinate,desilva07coverage,desilva07homological}, the theory of homological sensor networks addresses the problem of testing coverage of a bounded domain by a collection of sensors without coordinates.
The main result is the topological coverage criterion, which, in its most general form, states that under reasonable geometric assumptions, the $d$-dimensional homology of a pair of simplicial complexes built on the neighborhood graph will be nontrivial if and only if there is sufficient coverage (see Section~\ref{sec:tcc} for the precise statements).
This relative persistent homology test is called the Topological Coverage Criterion (TCC).

Superficially, the methods of SFA and TCC are very similar.
Both construct similar complexes and compute the persistent homology of the homological image of a complex on one scale into that of a larger scale.
They even overlap on some common techniques in their analysis including the use of the Nerve theorem and the Rips-\v{C}ech interleaving.
However, they differ in some fundamental way that makes it difficult to combine them into a single technique.
The main difference is that the TCC requires a clearly defined boundary.
Not only must the underlying space be a bounded subset of $\R^d$, the data must also be labeled to indicate which input points are close to the boundary.
This requirement is perhaps the main reason why the TCC can so rarely be applied in practice.
% Cavanna et al.~\cite{cavanna2017when} generalized the TCC to allow for more general spaces and robust coverage guarantees.
% That work gave a different approach to proving the correctness of the TCC which allows much more freedom in how the boundary is defined.

In applications to data analysis it is more natural to assume that our data measures some unknown function.
By requiring that our function is related to the metric of the space we can replace this requirement with assumptions about the function itself.
Indeed, these assumptions could relate the behavior of the function to the topological boundary of the space.
However, the generalized approach by Cavanna et al.~\cite{cavanna2017when} allows much more freedom in how the boundary is defined.

% The requirement that ``sensors'' can detect the presence of the boundary is unnatural in more general applications to data analysis.
% It is more natural assume that our data measures some unknown quantity.
% By requiring that our function is related to the metric of the space in a specific way (Lipschitz) we can replace this requirement with assumptions about the function itself.
% Indeed, these assumptions could relate the behavior of the function to the topological boundary of the space.
% However, the condition holds for any subset which ``surrounds'' the space in a specific sense~\cite{cavanna2017when}.

We consider the case in which we have incomplete data from a particular sublevel set of our function.
% We consider the case where we can only verify our sample in a part of the  % have incomplete data from a particular sublevel set of our function.
Our goal is to isolate this data so we can analyze the function only in the verified region.
%corresponding part persistent homology of the function in the verified region without allowing missing
From this perspective, the TCC confirms that we not only have coverage, but that the sample we have is topologically representative of the region near, and above this sublevel set.
We can then re-use the same machinery to analyze a \emph{part} of the function in a specific way.

% By requiring that this sublevel set ``surrounds'' the
% We can replace the boundary with this sublevel set by requiring that it ``surrounds'' the space, with data points with function values close to serving as samples of our boundary\textbf{FUCK}
% % From this perspective, the TCC verifies that we not only have coverage, but that the sample we have is topologically representative of the region near, and above this sublevel set.
%
% While the approximation of a function's persistent homology is well studied in general~\cite{chazal08towards}, the presence of incomplete data can severely impact the quality of the approximation.
% This is primarily due to the nature of homology as a measure of \emph{global} structure.
% While the obvious solution is to simply remove the un-verified data, the question of what precisely this would approximate is important to consider.

% Moreover, as a necessary but not sufficient condition for coverage there is room to question what can go wrong in the case of false positives.
% In fact, the efficacy of the condition relies on having enough sensors close enough to approximate the boundary in homology.
% This leads us to believe the condition checks for something more specific than coverage alone.
% Specifically, that we have a sample as well as a subsample that reflect the topology of the space and its boundary as a pair.
